{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/PBL/FastIF/src/app/login/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Image from 'next/image';\r\nimport { useRouter } from 'next/navigation';\r\nimport { FormEvent, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { motion, useReducedMotion } from 'framer-motion';\r\n\r\nfunction Header() {\r\n  const reduce = useReducedMotion();\r\n\r\n  return (\r\n    <motion.header\r\n      initial={reduce ? {} : { y: -18, opacity: 0 }}\r\n      animate={reduce ? {} : { y: 0, opacity: 1 }}\r\n      transition={{ duration: 0.45, ease: 'easeOut' }}\r\n      className=\"bg-[#0A1A4A] py-4 px-6 md:px-12\"\r\n    >\r\n      <div className=\"max-w-7xl mx-auto flex items-center justify-between\">\r\n        <Link href=\"/\">\r\n          <Image\r\n            src=\"/logo-fastif-white.png\"\r\n            alt=\"FastIF Logo\"\r\n            width={120}\r\n            height={40}\r\n            className=\"h-10 w-auto\"\r\n          />\r\n        </Link>\r\n      </div>\r\n    </motion.header>\r\n  );\r\n}\r\n\r\nfunction Footer() {\r\n  const reduce = useReducedMotion();\r\n\r\n  return (\r\n    <motion.footer\r\n      initial={reduce ? {} : { y: 18, opacity: 0 }}\r\n      animate={reduce ? {} : { y: 0, opacity: 1 }}\r\n      transition={{ duration: 0.45, ease: 'easeOut' }}\r\n      className=\"bg-[#0A1A4A] py-6 px-6 mt-12\"\r\n    >\r\n      <div className=\"max-w-7xl mx-auto text-center\">\r\n        <p className=\"text-white text-sm md:text-base\">\r\n          © 2025 Fasilitas Surat Informatika. All rights reserved.\r\n        </p>\r\n      </div>\r\n    </motion.footer>\r\n  );\r\n}\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false); // ⬅️ Tambahkan di sini\r\n  const reduce = useReducedMotion();\r\n\r\n  const handleSubmit = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:8001/api/login\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        credentials: \"include\", // penting buat kirim session cookie\r\n        body: JSON.stringify({\r\n          username,\r\n          password,\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok || !data.success) {\r\n        alert(\r\n          data.message || \"Login gagal, periksa kembali username & password\"\r\n        );\r\n        return;\r\n      }\r\n\r\n      // ✅ Jika login berhasil\r\n      if (data.user.role === \"admin\") {\r\n        router.push(\"/admin/dashboard\");\r\n      } else if (data.user.role === \"mahasiswa\") {\r\n        router.push(\"/mahasiswa/DashboardMhs\");\r\n      } else {\r\n        alert(\"Role tidak dikenali!\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Login error:\", err);\r\n      alert(\"Terjadi kesalahan saat login. Pastikan server backend berjalan.\");\r\n    }\r\n  };\r\n\r\n  const cardVariants = {\r\n    hidden: { opacity: 0, y: 18, scale: 0.995 },\r\n    visible: { opacity: 1, y: 0, scale: 1 },\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen bg-gray-50\">\r\n      <Header />\r\n\r\n      <main className=\"flex-grow flex items-center justify-center px-6 py-12\">\r\n        <motion.div\r\n          className=\"bg-white rounded-2xl shadow-lg p-6 md:p-12 w-full max-w-md\"\r\n          initial={reduce ? {} : \"hidden\"}\r\n          animate={reduce ? {} : \"visible\"}\r\n          variants={cardVariants}\r\n          transition={{ duration: 0.5, ease: \"easeOut\" }}\r\n        >\r\n          <div className=\"flex flex-col items-center mb-6 md:mb-8\">\r\n            <Image\r\n              src=\"/logo-fastif-color.png\"\r\n              alt=\"FastIF Logo\"\r\n              width={180}\r\n              height={60}\r\n              className=\"mb-4\"\r\n            />\r\n            <h1 className=\"text-lg md:text-2xl font-bold text-center text-gray-900\">\r\n              Sistem Surat Menyurat Cepat\r\n            </h1>\r\n            <p className=\"text-sm md:text-base font-medium text-center text-gray-700 mt-1\">\r\n              Jurusan Teknik Informatika\r\n            </p>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Nama Pengguna\"\r\n                value={username}\r\n                onChange={(e) => setUsername(e.target.value)}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0A1C56] focus:border-transparent text-gray-900 placeholder-gray-500\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <input\r\n                type=\"password\"\r\n                placeholder=\"Kata Sandi Pengguna\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0A1C56] focus:border-transparent text-gray-900 placeholder-gray-500\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <motion.button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              whileHover={reduce ? {} : { scale: 1.02 }}\r\n              whileTap={reduce ? {} : { scale: 0.99 }}\r\n              transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\r\n              className={`w-full ${\r\n                loading\r\n                  ? \"bg-gray-400 cursor-not-allowed\"\r\n                  : \"bg-[#0A1C56] hover:bg-[#00aeff]/90\"\r\n              } text-white font-medium py-3 rounded-lg transition-colors`}\r\n            >\r\n              {loading ? \"Memproses...\" : \"Masuk\"}\r\n            </motion.button>\r\n          </form>\r\n\r\n          <p className=\"text-center text-sm text-gray-600 mt-6\">\r\n            Belum punya akun? Hubungi TU.\r\n          </p>\r\n        </motion.div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}